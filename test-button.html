<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Bot√£o SCAN</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            display: block;
            width: 100%;
        }
        .test-btn:hover {
            background: #0056b3;
        }
        .log-area {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Teste do Bot√£o SCAN</h1>
        
        <button id="testBasicClick" class="test-btn">1. Teste Clique B√°sico</button>
        <button id="testLibraries" class="test-btn">2. Verificar Bibliotecas</button>
        <button id="testDeviceDetection" class="test-btn">3. Testar Detec√ß√£o de Dispositivo</button>
        <button id="testScanButton" class="test-btn">4. Simular Clique no Bot√£o SCAN</button>
        <button id="clearLog" class="test-btn" style="background: #dc3545;">Limpar Log</button>
        
        <div id="logArea" class="log-area"></div>
    </div>

    <script>
        const logArea = document.getElementById('logArea');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logArea.innerHTML += `[${timestamp}] ${message}\n`;
            logArea.scrollTop = logArea.scrollHeight;
            console.log(message);
        }
        
        // Teste 1: Clique b√°sico
        document.getElementById('testBasicClick').addEventListener('click', () => {
            log('‚úÖ Clique b√°sico funcionando!');
        });
        
        // Teste 2: Verificar bibliotecas
        document.getElementById('testLibraries').addEventListener('click', () => {
            log('üîç Verificando bibliotecas...');
            log('ONNX Runtime: ' + (typeof window.ort !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'));
            log('OpenCV: ' + (typeof window.cv !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'));
            log('PaddleOCR: ' + (typeof window.Paddle !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'));
            log('LotteryScanner: ' + (typeof window.LotteryScanner !== 'undefined' ? '‚úÖ Carregado' : '‚ùå N√£o carregado'));
            
            if (window.librariesLoaded) {
                log('Status das bibliotecas: ' + JSON.stringify(window.librariesLoaded));
            }
        });
        
        // Teste 3: Detec√ß√£o de dispositivo
        document.getElementById('testDeviceDetection').addEventListener('click', () => {
            log('üì± Testando detec√ß√£o de dispositivo...');
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                            ('ontouchstart' in window) || 
                            (navigator.maxTouchPoints > 0);
            log('Dispositivo m√≥vel: ' + (isMobile ? '‚úÖ Sim' : '‚ùå N√£o'));
            log('User Agent: ' + navigator.userAgent);
            log('Touch support: ' + ('ontouchstart' in window ? '‚úÖ Sim' : '‚ùå N√£o'));
            log('Max touch points: ' + navigator.maxTouchPoints);
        });
        
        // Teste 4: Simular clique no bot√£o SCAN
        document.getElementById('testScanButton').addEventListener('click', () => {
            log('üéØ Tentando simular clique no bot√£o SCAN...');
            
            // Tentar encontrar o bot√£o SCAN na p√°gina principal
            const scanButton = parent.document?.getElementById('scanButton') || 
                              document.getElementById('scanButton');
            
            if (scanButton) {
                log('‚úÖ Bot√£o SCAN encontrado, simulando clique...');
                scanButton.click();
            } else {
                log('‚ùå Bot√£o SCAN n√£o encontrado');
                log('Tentando abrir a p√°gina principal...');
                window.open('/', '_blank');
            }
        });
        
        // Limpar log
        document.getElementById('clearLog').addEventListener('click', () => {
            logArea.innerHTML = '';
        });
        
        // Log inicial
        log('üöÄ Teste do bot√£o SCAN iniciado');
        log('P√°gina carregada em: ' + window.location.href);
    </script>
</body>
</html>