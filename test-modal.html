<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Modal - Lottery Scanner</title>
    <link rel="stylesheet" href="lottery-scanner.css">
</head>
<body>
    <div class="container">
        <h1>üéØ Teste do Modal Desktop</h1>
        
        <div class="scan-section">
            <button id="scanButton" class="scan-btn">
                <span id="scanText">SCAN</span>
                <div id="loadingSpinner" class="loading-spinner" style="display: none;"></div>
            </button>
        </div>
        
        <div id="log" style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px; font-family: monospace; white-space: pre-wrap;"></div>
    </div>
    
    <input type="file" id="imageInput" accept="image/*" style="display: none;">
    
    <script src="lottery-scanner-v2.js"></script>
    
    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent += `[${timestamp}] ${message}\n`;
            console.log(message);
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            log('üöÄ DOM carregado');
            
            // Aguardar um pouco para garantir que o script foi carregado
            setTimeout(() => {
                log('üîç Verificando window.lotteryScanner...');
                
                if (window.lotteryScanner) {
                    log('‚úÖ window.lotteryScanner encontrado!');
                    log('üìã Tipo: ' + typeof window.lotteryScanner);
                    log('üîß M√©todos dispon√≠veis: ' + Object.getOwnPropertyNames(Object.getPrototypeOf(window.lotteryScanner)).join(', '));
                    
                    // Testar se o bot√£o est√° funcionando
                    const scanButton = document.getElementById('scanButton');
                    if (scanButton) {
                        log('‚úÖ Bot√£o SCAN encontrado!');
                        
                        // Adicionar listener de teste
                        scanButton.addEventListener('click', () => {
                            log('üñ±Ô∏è Clique no bot√£o detectado!');
                            log('üîç Chamando startScan()...');
                            
                            try {
                                window.lotteryScanner.startScan();
                                log('‚úÖ startScan() chamado com sucesso!');
                            } catch (error) {
                                log('‚ùå Erro ao chamar startScan(): ' + error.message);
                                log('üìã Stack trace: ' + error.stack);
                            }
                        });
                        
                        log('‚úÖ Event listener adicionado ao bot√£o!');
                    } else {
                        log('‚ùå Bot√£o SCAN n√£o encontrado!');
                    }
                } else {
                    log('‚ùå window.lotteryScanner N√ÉO encontrado!');
                    log('üîç Tentando criar nova inst√¢ncia...');
                    
                    try {
                        window.lotteryScanner = new LotteryScanner();
                        log('‚úÖ Nova inst√¢ncia criada com sucesso!');
                    } catch (error) {
                        log('‚ùå Erro ao criar inst√¢ncia: ' + error.message);
                    }
                }
            }, 500);
        });
    </script>
</body>
</html>